(this.webpackJsonpcovid_slots=this.webpackJsonpcovid_slots||[]).push([[0],{41:function(e,t,c){},46:function(e,t){},48:function(e,t){},57:function(e,t,c){},58:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),i=c(35),n=c.n(i),l=(c(41),c(14)),r=c(19),o=c(4),j=c(20),d=c(2),b=c(13),h=c.n(b),v=c(12),O=c.n(v),u=c(0),f=function(e){return Object(u.jsxs)("div",{className:"row border-line",children:[Object(u.jsx)("div",{className:"updated-time",children:O()().format("HH:MM:SS")}),Object(u.jsxs)("div",{className:"column",children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{children:e.date}),Object(u.jsx)("div",{children:e.vaccine}),Object(u.jsx)("div",{className:e.available_capacity>0?"green":"red",children:e.available_capacity})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{children:e.name}),Object(u.jsx)("div",{children:e.pincode}),Object(u.jsx)("div",{children:e.session_id})]})]})]})};var x=function(e){var t=e.loading,c=e.slotsList18,a=e.slotsList45,s=e.availableSlots18,i=e.availableSlots45;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsxs)("div",{className:"available-container",children:[Object(u.jsx)("h2",{className:"title",children:"Slots Available (18+)"}),0===s.length?Object(u.jsx)("div",{className:"loader",children:"No slots available"}):Object(u.jsx)("div",{children:s.map(f)})]}),Object(u.jsxs)("div",{className:"all-centers-container",children:[Object(u.jsx)("h2",{className:"title",children:"Centers (18+)"}),t?Object(u.jsx)("div",{className:"loader",children:"Fetching data..."}):Object(u.jsx)("div",{children:c.map(f)})]})]}),Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsxs)("div",{className:"available-container",children:[Object(u.jsx)("h2",{className:"title",children:"Slots Available (45+)"}),0===i.length?Object(u.jsx)("div",{className:"loader",children:"No slots available"}):Object(u.jsx)("div",{children:i.map(f)})]}),Object(u.jsxs)("div",{className:"all-centers-container",children:[Object(u.jsx)("h2",{className:"title",children:"Centers (45+)"}),t?Object(u.jsx)("div",{className:"loader",children:"Fetching data..."}):Object(u.jsx)("div",{children:a.map(f)})]})]})]})};c(57);var m=function(e){var t=e.className,c=void 0===t?"":t,a=e.varient,s=void 0===a?"regular":a,i=e.children,n=e.label,o=Object(r.a)(e,["className","varient","children","label"]);return Object(u.jsx)("button",Object(l.a)(Object(l.a)({class:"button -".concat(s," center ").concat(c)},o),{},{children:i||n}))},p=function(e){return Object(u.jsxs)("div",{className:"row border-line",children:[Object(u.jsx)("div",{className:"updated-time",children:O()().format("HH:MM:SS")}),Object(u.jsxs)("div",{className:"column",children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{children:e.date}),Object(u.jsx)("div",{children:e.vaccine}),Object(u.jsx)("div",{className:e.available_capacity>0?"green":"red",children:e.available_capacity})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{children:e.name}),Object(u.jsx)("div",{children:e.pincode}),Object(u.jsx)("div",{children:e.session_id})]})]})]})};var N=function(e){e.loading,e.slotsList18,e.slotsList45;var t=e.availableSlots18,c=(e.availableSlots45,Object(a.useState)([])),s=Object(o.a)(c,2),i=s[0],n=s[1],l=Object(a.useState)(!1),r=Object(o.a)(l,2),j=r[0],d=r[1],b=Object(a.useState)(null),v=Object(o.a)(b,2),O=(v[0],v[1]),f=Object(a.useState)(""),x=Object(o.a)(f,2),m=x[0],N=x[1],S=Object(a.useState)(""),g=Object(o.a)(S,2),_=g[0],y=g[1];Object(a.useEffect)((function(){var e=setInterval((function(){k()}),11e4);return setTimeout((function(){N(""),function(){var e=h.a.getVoiceByName("Alex");new h.a({voice:e,pitch:1,rate:1}).write("Session expired")}()}),84e4),function(){clearTimeout(e)}}),[]),Object(a.useEffect)((function(){if(t.length>0&&i.length){var e=!1;t.forEach((function(t){t.available_capacity>=i.length&&!j&&!e&&(e=!0,E(t))}))}}),[t]),Object(a.useEffect)((function(){m.length>20&&k()}),[m]);var k=function(){if(m){y("");var e=[];fetch("https://cdn-api.co-vin.in/api/v2/appointment/beneficiaries",{headers:{authorization:"Bearer "+m}}).then((function(e){return e.json()})).then((function(t){t.beneficiaries.forEach((function(t){t.appointments&&t.appointments.length>0?O(t.appointments[0]):e.push(t.beneficiary_reference_id)})),n(e)})).catch((function(e){console.log(e),N(""),y("Please Enter correct Token")}))}},E=function(e){m&&(d(!0),fetch("https://cdn-api.co-vin.in/api/v2/appointment/schedule",{method:"POST",headers:{Authorization:"Bearer "+m},body:JSON.stringify({center_id:517615,session_id:"16c4b608-30f8-494b-babd-9d770eb88366",beneficiaries:["86107547458210"],slot:"09:00AM-11:00AM",dose:1})}).then((function(e){return e.json()})).then((function(e){O(e.appointment_id)})).catch((function(e){return console.log(e)})).finally((function(){d(!1)})))};return Object(u.jsxs)("div",{className:"App-header",children:[Object(u.jsxs)("div",{className:"available-container",children:[Object(u.jsx)("h2",{className:"title",children:"Slots Available (18+)"}),0===t.length?Object(u.jsx)("div",{className:"loader",children:"No slots available"}):Object(u.jsx)("div",{children:t.map(p)})]}),Object(u.jsxs)("div",{className:"all-centers-container",children:[Object(u.jsx)("h2",{className:"title",children:"Enter Token"}),m?Object(u.jsx)("div",{className:"token token-alert",children:m}):Object(u.jsx)("div",{className:"token token-alert error",children:"Please enter Auth Token"}),_&&Object(u.jsx)("div",{className:"error",children:_}),Object(u.jsx)("div",{className:"token token-input",children:Object(u.jsx)("textarea",{type:"text",onChange:function(e){var t=e.target.value.replace(/\"/gi,"").replace("Bearer ","");N("".concat(t))},value:m})})]})]})};c(58);var S=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)([]),n=Object(o.a)(i,2),b=n[0],v=n[1],f=Object(a.useState)([]),p=Object(o.a)(f,2),S=p[0],g=p[1],_=Object(a.useState)([]),y=Object(o.a)(_,2),k=y[0],E=y[1],w=Object(a.useState)([]),A=Object(o.a)(w,2),L=A[0],M=A[1],B=Object(a.useState)(!0),T=Object(o.a)(B,2),C=T[0],H=T[1],Y=Object(a.useState)(!1),D=Object(o.a)(Y,2),I=D[0],J=D[1],P=function(){s(!0);var e=O()().format("DD-MM-YYYY");fetch("https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id=294&date="+e).then((function(e){return e.json()})).then((function(e){var t=[],c=[],a=[],s=[];e.centers.forEach((function(e){var i=e.sessions,n=Object(r.a)(e,["sessions"]);i.forEach((function(e){var i=e.min_age_limit,r=e.available_capacity,o=Object(l.a)(Object(l.a)({},n),e);i<45?(t.push(o),r>0&&c.push(o)):(a.push(o),r>0&&s.push(o))}))})),v(t),g(c),E(a),M(s)})).catch((function(e){return console.log(e)})).finally((function(){return s(!1)}))};Object(a.useEffect)((function(){S.length>0&&C&&z("18+")}),[S]),Object(a.useEffect)((function(){L.length>0&&I&&z("45+")}),[L]),Object(a.useEffect)((function(){P();var e=setInterval((function(){return P()}),2e3);return function(){clearTimeout(e)}}),[]);var z=function(e){var t=h.a.getVoiceByName("Alex");new h.a({voice:t,pitch:1,rate:1}).write("Covid vaccines are available for "+e)};return Object(u.jsx)(j.a,{children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{class:"nav-area",children:[Object(u.jsx)("li",{children:Object(u.jsx)(j.b,{to:"/",children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)(j.b,{to:"/slots_available",children:"Slots available"})})]})}),Object(u.jsxs)("div",{className:"volume-controll",children:[Object(u.jsxs)(m,{onClick:function(){return H(!C)},className:"icon-button",children:[Object(u.jsx)("span",{children:"18+"}),Object(u.jsx)("i",{className:"fa fa-volume-".concat(C?"up":"off")})]}),Object(u.jsxs)(m,{onClick:function(){return J(!I)},className:"icon-button",children:[Object(u.jsx)("span",{children:"45+"}),Object(u.jsx)("i",{className:"fa fa-volume-".concat(I?"up":"off")})]})]})]}),Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{path:"/slots_available",children:Object(u.jsx)(x,{loading:c,slotsList18:b,slotsList45:k,availableSlots18:S,availableSlots45:L})}),Object(u.jsx)(d.a,{path:"/automatic_booking",children:Object(u.jsx)(N,{loading:c,slotsList18:b,slotsList45:k,availableSlots18:S,availableSlots45:L})}),Object(u.jsx)(d.a,{path:"/",children:Object(u.jsx)(x,{loading:c,slotsList18:b,slotsList45:k,availableSlots18:S,availableSlots45:L})})]})]})})};n.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.898149d3.chunk.js.map