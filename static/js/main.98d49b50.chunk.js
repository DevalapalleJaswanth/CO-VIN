(this.webpackJsonpcovid_slots=this.webpackJsonpcovid_slots||[]).push([[0],{44:function(e,t,c){},49:function(e,t){},51:function(e,t){},60:function(e,t,c){},61:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),i=c(38),n=c.n(i),l=(c(44),c(28)),r=c(14),o=c(22),j=c(4),d=c(19),b=c(2),h=c(13),v=c.n(h),O=c(12),u=c.n(O),f=c(0),x=function(e){return Object(f.jsxs)("div",{className:"row border-line",children:[Object(f.jsx)("div",{className:"updated-time",children:u()().format("HH:MM:SS")}),Object(f.jsxs)("div",{className:"column",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{children:e.date}),Object(f.jsx)("div",{children:e.vaccine}),Object(f.jsx)("div",{className:e.available_capacity>0?"green":"red",children:e.available_capacity})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{children:e.name}),Object(f.jsx)("div",{children:e.pincode}),Object(f.jsx)("div",{children:e.session_id})]})]})]})};var m=function(e){var t=e.loading,c=e.slotsList18,a=e.slotsList45,s=e.availableSlots18,i=e.availableSlots45;return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"App-header",children:[Object(f.jsxs)("div",{className:"available-container",children:[Object(f.jsx)("h2",{className:"title",children:"Slots Available (18+)"}),0===s.length?Object(f.jsx)("div",{className:"loader",children:"No slots available"}):Object(f.jsx)("div",{children:s.map(x)})]}),Object(f.jsxs)("div",{className:"all-centers-container",children:[Object(f.jsx)("h2",{className:"title",children:"Centers (18+)"}),t?Object(f.jsx)("div",{className:"loader",children:"Fetching data..."}):Object(f.jsx)("div",{children:c.map(x)})]})]}),Object(f.jsxs)("div",{className:"App-header",children:[Object(f.jsxs)("div",{className:"available-container",children:[Object(f.jsx)("h2",{className:"title",children:"Slots Available (45+)"}),0===i.length?Object(f.jsx)("div",{className:"loader",children:"No slots available"}):Object(f.jsx)("div",{children:i.map(x)})]}),Object(f.jsxs)("div",{className:"all-centers-container",children:[Object(f.jsx)("h2",{className:"title",children:"Centers (45+)"}),t?Object(f.jsx)("div",{className:"loader",children:"Fetching data..."}):Object(f.jsx)("div",{children:a.map(x)})]})]})]})};c(60);var p=function(e){var t=e.className,c=void 0===t?"":t,a=e.varient,s=void 0===a?"regular":a,i=e.children,n=e.label,l=Object(o.a)(e,["className","varient","children","label"]);return Object(f.jsx)("button",Object(r.a)(Object(r.a)({class:"button -".concat(s," center ").concat(c)},l),{},{children:i||n}))},N=function(e){return Object(f.jsxs)("div",{className:"row border-line",children:[Object(f.jsx)("div",{className:"updated-time",children:u()().format("HH:MM:SS")}),Object(f.jsxs)("div",{className:"column",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{children:e.date}),Object(f.jsx)("div",{children:e.vaccine}),Object(f.jsx)("div",{className:e.available_capacity>0?"green":"red",children:e.available_capacity})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{children:e.name}),Object(f.jsx)("div",{children:e.pincode}),Object(f.jsx)("div",{children:e.session_id})]})]})]})};var S=function(e){e.loading;var t=e.slotsList18,c=(e.slotsList45,e.availableSlots18),s=(e.availableSlots45,Object(a.useState)([])),i=Object(j.a)(s,2),n=i[0],l=i[1],r=Object(a.useState)(!1),o=Object(j.a)(r,2),d=o[0],b=o[1],h=Object(a.useState)(null),O=Object(j.a)(h,2),u=(O[0],O[1]),x=Object(a.useState)(""),m=Object(j.a)(x,2),p=m[0],S=m[1],g=Object(a.useState)(""),_=Object(j.a)(g,2),k=_[0],y=_[1];Object(a.useEffect)((function(){var e=setInterval((function(){E()}),6e4);return setTimeout((function(){S(""),function(){var e=v.a.getVoiceByName("Alex");new v.a({voice:e,pitch:1,rate:1}).write("Session expired")}()}),84e4),function(){clearTimeout(e)}}),[]),Object(a.useEffect)((function(){t.length>0&&n.length&&t.forEach((function(e){e.available_capacity>=n.length&&!d&&w(e)}))}),[t]),Object(a.useEffect)((function(){p.length>20&&E()}),[p]);var E=function(){if(p){y(""),b(!0);var e=[];fetch("https://cdn-api.co-vin.in/api/v2/appointment/beneficiaries",{headers:{authorization:"Bearer "+p}}).then((function(e){return e.json()})).then((function(t){t.beneficiaries.forEach((function(t){t.appointments?u(t.appointments[0]):e.push(t.beneficiary_reference_id)})),l(e)})).catch((function(e){console.log(e),S(""),y("Please Enter correct Token")}))}},w=function(e){p&&fetch("https://cdn-api.co-vin.in/api/v2/appointment/schedule",{method:"POST",headers:{authorization:"Bearer "+p},body:JSON.stringify({dose:1,session_id:e.session_id,slot:"11:00AM-01:00PM",beneficiaries:n})}).then((function(e){return e.json()})).then((function(e){u(e.appointment_id)})).catch((function(e){return console.log(e)})).finally((function(){b(!1)}))};return Object(f.jsxs)("div",{className:"App-header",children:[Object(f.jsxs)("div",{className:"available-container",children:[Object(f.jsx)("h2",{className:"title",children:"Slots Available (18+)"}),0===c.length?Object(f.jsx)("div",{className:"loader",children:"No slots available"}):Object(f.jsx)("div",{children:c.map(N)})]}),Object(f.jsxs)("div",{className:"all-centers-container",children:[Object(f.jsx)("h2",{className:"title",children:"Enter Token"}),p?Object(f.jsx)("div",{className:"token token-alert",children:p}):Object(f.jsx)("div",{className:"token token-alert error",children:"Please enter Auth Token"}),k&&Object(f.jsx)("div",{className:"error",children:k}),Object(f.jsx)("div",{className:"token token-input",children:Object(f.jsx)("textarea",{type:"text",onChange:function(e){var t=e.target.value.replace(/\"/gi,"").replace("Bearer ","");S("".concat(t))},value:p})})]})]})};c(61);var g=function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)([]),n=Object(j.a)(i,2),h=n[0],O=n[1],x=Object(a.useState)([]),N=Object(j.a)(x,2),g=N[0],_=N[1],k=Object(a.useState)([]),y=Object(j.a)(k,2),E=y[0],w=y[1],A=Object(a.useState)([]),L=Object(j.a)(A,2),M=L[0],B=L[1],T=Object(a.useState)(!0),C=Object(j.a)(T,2),H=C[0],P=C[1],Y=Object(a.useState)(!1),D=Object(j.a)(Y,2),I=D[0],J=D[1],z=function(){s(!0);var e=u()().format("DD-MM-YYYY");fetch("https://cdn-api.co-vin.in/api/v2/appointment/sessions/calendarByDistrict?district_id=294&date="+e).then((function(e){return e.json()})).then((function(e){var t=[],c=[],a=[],s=[];e.centers.forEach((function(e){var i=e.sessions,n=Object(o.a)(e,["sessions"]);i.forEach((function(e){var i=e.min_age_limit,l=e.available_capacity,o=Object(r.a)(Object(r.a)({},n),e);i<45?(t.push(o),l>0&&c.push(o)):(a.push(o),l>0&&s.push(o))}))})),O(t),_([].concat(Object(l.a)(g),c)),w(a),B([].concat(Object(l.a)(M),s))})).catch((function(e){return console.log(e)})).finally((function(){return s(!1)}))};Object(a.useEffect)((function(){g.length>0&&H&&F("18+")}),[g]),Object(a.useEffect)((function(){M.length>0&&I&&F("45+")}),[M]),Object(a.useEffect)((function(){z();var e=setInterval((function(){return z()}),1e4);return function(){clearTimeout(e)}}),[]);var F=function(e){var t=v.a.getVoiceByName("Alex");new v.a({voice:t,pitch:1,rate:1}).write("Covid vaccines are available for "+e)};return Object(f.jsx)(d.a,{children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("header",{children:[Object(f.jsx)("nav",{children:Object(f.jsxs)("ul",{class:"nav-area",children:[Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/",children:"Home"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/slots_available",children:"Slots available"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/automatic_booking",children:"Booking"})})]})}),Object(f.jsxs)("div",{className:"volume-controll",children:[Object(f.jsxs)(p,{onClick:function(){return P(!H)},className:"icon-button",children:[Object(f.jsx)("span",{children:"18+"}),Object(f.jsx)("i",{className:"fa fa-volume-".concat(H?"up":"off")})]}),Object(f.jsxs)(p,{onClick:function(){return J(!I)},className:"icon-button",children:[Object(f.jsx)("span",{children:"45+"}),Object(f.jsx)("i",{className:"fa fa-volume-".concat(I?"up":"off")})]})]})]}),Object(f.jsxs)(b.c,{children:[Object(f.jsx)(b.a,{path:"/slots_available",children:Object(f.jsx)(m,{loading:c,slotsList18:h,slotsList45:E,availableSlots18:g,availableSlots45:M})}),Object(f.jsx)(b.a,{path:"/automatic_booking",children:Object(f.jsx)(S,{loading:c,slotsList18:h,slotsList45:E,availableSlots18:g,availableSlots45:M})}),Object(f.jsx)(b.a,{path:"/",children:Object(f.jsx)(m,{loading:c,slotsList18:h,slotsList45:E,availableSlots18:g,availableSlots45:M})})]})]})})};n.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(g,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.98d49b50.chunk.js.map